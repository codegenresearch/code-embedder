import argparse from loguru import logger from src.code_embedding import CodeEmbedder from src.script_content_reader import ScriptContentReaderInterface from src.script_metadata_extractor import ScriptMetadataExtractorInterface class CommandLineInterface: def __init__(self): self.parser = argparse.ArgumentParser() self.parser.add_argument( "--readme-paths", nargs="+", type=str, help="Paths to Readme files", default=["README.md"] ) def parse_arguments(self): return self.parser.parse_args() class Application: def __init__(self, script_metadata_extractor: ScriptMetadataExtractorInterface, script_content_reader: ScriptContentReaderInterface): self.script_metadata_extractor = script_metadata_extractor self.script_content_reader = script_content_reader def run(self, readme_paths: list[str]): code_embedder = CodeEmbedder( readme_paths=readme_paths, script_metadata_extractor=self.script_metadata_extractor, script_content_reader=self.script_content_reader, ) code_embedder() logger.info("Code Embedder finished successfully.") if __name__ == "__main__": cli = CommandLineInterface() args = cli.parse_arguments() app = Application( script_metadata_extractor=ScriptMetadataExtractorInterface(), script_content_reader=ScriptContentReaderInterface(), ) app.run(args.readme_paths)